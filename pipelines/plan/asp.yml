trigger: none

pool:
  vmImage: ubuntu-latest

variables:
- name: workingDirectory
  value: common/app-service-plan
- name: vault
  value: automata-kv

stages:
  - stage: DevPlan
    jobs: 
    - job: Plan
      steps:
      - task: AzureCLI@2
        displayName: Plan
        inputs:
          azureSubscription: 'HandsOn'
          scriptType: 'pscore'
          scriptLocation: 'inlineScript'
          inlineScript: 'export ARM_CLIENT_ID = $(az keyvault secret show --name arm-client-id --vault ${{ variables.vault }} --query ''value'' --out tsv)'
          workingDirectory: '${{ variables.workingDirectory }}'
            
